<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping-Pong Web - Deux Joueurs</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        h1 {
            color: #ff416c;
            margin-bottom: 10px;
        }
        
        .game-container {
            width: 800px;
            max-width: 100%;
        }
        
        .score-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        
        .player {
            text-align: center;
        }
        
        .player1 { color: #3498db; }
        .player2 { color: #e74c3c; }
        
        .score {
            font-size: 48px;
            font-weight: bold;
        }
        
        canvas {
            background: #0c2a4d;
            display: block;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            gap: 20px;
        }
        
        .control-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            flex: 1;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        #pauseBtn { background: #f39c12; }
        #pauseBtn:hover { background: #e67e22; }
        #resetBtn { background: #e74c3c; }
        #resetBtn:hover { background: #c0392b; }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .winner-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
            border: 3px solid #f1c40f;
        }
    </style>
</head>
<body>
    <h1>PING-PONG WEB</h1>
    <p>Affrontez un ami dans ce jeu de ping-pong classique !</p>
    
    <div class="game-container">
        <div class="score-container">
            <div class="player player1">
                <div>JOUEUR 1 (Z/S)</div>
                <div id="score1" class="score">0</div>
            </div>
            <div style="align-self: center; font-size: 24px;">VS</div>
            <div class="player player2">
                <div>JOUEUR 2 (↑/↓)</div>
                <div id="score2" class="score">0</div>
            </div>
        </div>
        
        <canvas id="gameCanvas" width="800" height="500"></canvas>
        
        <div class="controls">
            <div class="control-panel">
                <button id="startBtn">Démarrer la partie</button>
                <button id="pauseBtn">Pause / Reprendre</button>
                <button id="resetBtn">Réinitialiser</button>
            </div>
        </div>
        
        <div class="instructions">
            <h3>Comment jouer :</h3>
            <p>• Joueur 1 : Z (haut) et S (bas)</p>
            <p>• Joueur 2 : Flèches ↑ (haut) et ↓ (bas)</p>
            <p>• Le premier à 11 points avec 2 points d'écart gagne</p>
            <p>• Appuyez sur Espace pour lancer la balle</p>
        </div>
    </div>
    
    <div id="winnerMessage" class="winner-message">
        <h2>VICTOIRE !</h2>
        <p id="winnerText"></p>
        <button id="playAgainBtn">Rejouer</button>
    </div>

    <script>
        // Variables globales
        let canvas, ctx;
        let gameRunning = false;
        let gamePaused = false;
        let animationId = null;
        
        // Configuration du jeu
        const config = {
            paddleWidth: 15,
            paddleHeight: 100,
            paddleSpeed: 8,
            ballRadius: 10,
            initialSpeedX: 5
        };
        
        // État du jeu
        const gameState = {
            player1Y: 200,
            player2Y: 200,
            ballX: 400,
            ballY: 250,
            ballSpeedX: 5,
            ballSpeedY: 3,
            score1: 0,
            score2: 0,
            keys: {
                ArrowUp: false,
                ArrowDown: false,
                KeyZ: false,
                KeyS: false
            }
        };
        
        // Initialisation
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            // Configuration des événements
            setupEventListeners();
            
            // Dessiner l'écran d'accueil
            drawWelcomeScreen();
        }
        
        // Configuration des événements
        function setupEventListeners() {
            // Événements clavier
            document.addEventListener('keydown', (e) => {
                if (e.code in gameState.keys) {
                    gameState.keys[e.code] = true;
                    e.preventDefault();
                }
                
                // Espace pour lancer la balle
                if (e.code === 'Space' && gameRunning && !gamePaused) {
                    // Optionnel : lancer la balle
                }
            });
            
            document.addEventListener('keyup', (e) => {
                if (e.code in gameState.keys) {
                    gameState.keys[e.code] = false;
                    e.preventDefault();
                }
            });
            
            // Boutons
            document.getElementById('startBtn').addEventListener('click', startGame);
            document.getElementById('pauseBtn').addEventListener('click', togglePause);
            document.getElementById('resetBtn').addEventListener('click', resetGame);
            document.getElementById('playAgainBtn').addEventListener('click', playAgain);
        }
        
        // Démarrer le jeu
        function startGame() {
            if (!gameRunning) {
                gameRunning = true;
                gamePaused = false;
                
                // Réinitialiser les scores si c'est une nouvelle partie
                if (gameState.score1 === 0 && gameState.score2 === 0) {
                    resetGameState();
                }
                
                document.getElementById('startBtn').textContent = 'Partie en cours...';
                document.getElementById('startBtn').disabled = true;
                
                // Démarrer la boucle de jeu
                gameLoop();
            }
        }
        
        // Basculer pause/reprise
        function togglePause() {
            if (gameRunning) {
                gamePaused = !gamePaused;
                document.getElementById('pauseBtn').textContent = gamePaused ? 'Reprendre' : 'Pause';
                
                if (!gamePaused) {
                    gameLoop();
                }
            }
        }
        
        // Réinitialiser le jeu
        function resetGame() {
            // Arrêter l'animation
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            
            // Réinitialiser l'état du jeu
            gameRunning = false;
            gamePaused = false;
            resetGameState();
            
            // Réinitialiser l'interface
            document.getElementById('startBtn').textContent = 'Démarrer la partie';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').textContent = 'Pause / Reprendre';
            document.getElementById('winnerMessage').style.display = 'none';
            
            // Mettre à jour les scores
            updateScoreDisplay();
            
            // Dessiner l'écran d'accueil
            drawWelcomeScreen();
        }
        
        // Rejouer après une victoire
        function playAgain() {
            document.getElementById('winnerMessage').style.display = 'none';
            resetGame();
            startGame();
        }
        
        // Réinitialiser l'état du jeu
        function resetGameState() {
            gameState.player1Y = canvas.height / 2 - config.paddleHeight / 2;
            gameState.player2Y = canvas.height / 2 - config.paddleHeight / 2;
            gameState.ballX = canvas.width / 2;
            gameState.ballY = canvas.height / 2;
            gameState.ballSpeedX = config.initialSpeedX * (Math.random() > 0.5 ? 1 : -1);
            gameState.ballSpeedY = (Math.random() * 4 - 2);
            gameState.score1 = 0;
            gameState.score2 = 0;
        }
        
        // Mettre à jour l'affichage des scores
        function updateScoreDisplay() {
            document.getElementById('score1').textContent = gameState.score1;
            document.getElementById('score2').textContent = gameState.score2;
        }
        
        // Boucle principale du jeu
        function gameLoop() {
            if (gamePaused) {
                drawPauseScreen();
                return;
            }
            
            update();
            draw();
            
            if (gameRunning) {
                animationId = requestAnimationFrame(gameLoop);
            }
        }
        
        // Mettre à jour la logique du jeu
        function update() {
            // Déplacer les raquettes
            if (gameState.keys.KeyZ && gameState.player1Y > 0) {
                gameState.player1Y -= config.paddleSpeed;
            }
            if (gameState.keys.KeyS && gameState.player1Y < canvas.height - config.paddleHeight) {
                gameState.player1Y += config.paddleSpeed;
            }
            
            if (gameState.keys.ArrowUp && gameState.player2Y > 0) {
                gameState.player2Y -= config.paddleSpeed;
            }
            if (gameState.keys.ArrowDown && gameState.player2Y < canvas.height - config.paddleHeight) {
                gameState.player2Y += config.paddleSpeed;
            }
            
            // Déplacer la balle
            gameState.ballX += gameState.ballSpeedX;
            gameState.ballY += gameState.ballSpeedY;
            
            // Collisions avec les bords
            if (gameState.ballY - config.ballRadius < 0 || 
                gameState.ballY + config.ballRadius > canvas.height) {
                gameState.ballSpeedY = -gameState.ballSpeedY;
            }
            
            // Collision avec la raquette gauche
            if (gameState.ballX - config.ballRadius < 20 + config.paddleWidth &&
                gameState.ballX - config.ballRadius > 20 &&
                gameState.ballY > gameState.player1Y &&
                gameState.ballY < gameState.player1Y + config.paddleHeight) {
                
                const hitPos = (gameState.ballY - (gameState.player1Y + config.paddleHeight / 2)) / (config.paddleHeight / 2);
                gameState.ballSpeedX = Math.abs(gameState.ballSpeedX) * 1.05;
                gameState.ballSpeedY = hitPos * 5;
                gameState.ballX = 20 + config.paddleWidth + config.ballRadius;
            }
            
            // Collision avec la raquette droite
            if (gameState.ballX + config.ballRadius > canvas.width - 20 - config.paddleWidth &&
                gameState.ballX + config.ballRadius < canvas.width - 20 &&
                gameState.ballY > gameState.player2Y &&
                gameState.ballY < gameState.player2Y + config.paddleHeight) {
                
                const hitPos = (gameState.ballY - (gameState.player2Y + config.paddleHeight / 2)) / (config.paddleHeight / 2);
                gameState.ballSpeedX = -Math.abs(gameState.ballSpeedX) * 1.05;
                gameState.ballSpeedY = hitPos * 5;
                gameState.ballX = canvas.width - 20 - config.paddleWidth - config.ballRadius;
            }
            
            // Vérifier les points
            if (gameState.ballX < 0) {
                // Joueur 2 marque
                gameState.score2++;
                updateScoreDisplay();
                resetBall();
                checkWin();
            } else if (gameState.ballX > canvas.width) {
                // Joueur 1 marque
                gameState.score1++;
                updateScoreDisplay();
                resetBall();
                checkWin();
            }
        }
        
        // Réinitialiser la balle
        function resetBall() {
            gameState.ballX = canvas.width / 2;
            gameState.ballY = canvas.height / 2;
            gameState.ballSpeedX = config.initialSpeedX * (Math.random() > 0.5 ? 1 : -1);
            gameState.ballSpeedY = (Math.random() * 4 - 2);
        }
        
        // Vérifier si un joueur a gagné
        function checkWin() {
            if (gameState.score1 >= 11 || gameState.score2 >= 11) {
                const diff = Math.abs(gameState.score1 - gameState.score2);
                if (diff >= 2) {
                    showWinner();
                }
            }
        }
        
        // Afficher le message de victoire
        function showWinner() {
            gameRunning = false;
            const winner = gameState.score1 > gameState.score2 ? "Joueur 1" : "Joueur 2";
            document.getElementById('winnerText').textContent = `${winner} remporte la partie !`;
            document.getElementById('winnerMessage').style.display = 'block';
            document.getElementById('startBtn').textContent = 'Démarrer la partie';
            document.getElementById('startBtn').disabled = false;
        }
        
        // Dessiner les éléments du jeu
        function draw() {
            // Fond
            ctx.fillStyle = '#0c2a4d';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Ligne médiane
            ctx.beginPath();
            ctx.setLineDash([10, 15]);
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Raquettes
            ctx.fillStyle = '#3498db';
            ctx.fillRect(20, gameState.player1Y, config.paddleWidth, config.paddleHeight);
            
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(canvas.width - 20 - config.paddleWidth, gameState.player2Y, 
                        config.paddleWidth, config.paddleHeight);
            
            // Balle
            ctx.beginPath();
            ctx.arc(gameState.ballX, gameState.ballY, config.ballRadius, 0, Math.PI * 2);
            ctx.fillStyle = 'white';
            ctx.fill();
        }
        
        // Dessiner l'écran de pause
        function drawPauseScreen() {
            draw();
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = 'bold 60px Arial';
            ctx.fillStyle = '#f39c12';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('PAUSE', canvas.width / 2, canvas.height / 2);
        }
        
        // Dessiner l'écran d'accueil
        function drawWelcomeScreen() {
            ctx.fillStyle = '#0c2a4d';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Ligne médiane
            ctx.beginPath();
            ctx.setLineDash([10, 15]);
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Raquettes positionnées au centre
            ctx.fillStyle = '#3498db';
            ctx.fillRect(20, gameState.player1Y, config.paddleWidth, config.paddleHeight);
            
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(canvas.width - 20 - config.paddleWidth, gameState.player2Y, 
                        config.paddleWidth, config.paddleHeight);
            
            // Balle au centre
            ctx.beginPath();
            ctx.arc(canvas.width / 2, canvas.height / 2, config.ballRadius, 0, Math.PI * 2);
            ctx.fillStyle = 'white';
            ctx.fill();
            
            // Message
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = 'bold 40px Arial';
            ctx.fillStyle = '#f39c12';
            ctx.textAlign = 'center';
            ctx.fillText('PING-PONG WEB', canvas.width / 2, canvas.height / 2 - 40);
            
            ctx.font = '20px Arial';
            ctx.fillStyle = 'white';
            ctx.fillText('Cliquez sur "Démarrer la partie" pour commencer', 
                        canvas.width / 2, canvas.height / 2 + 20);
        }
        
        // Démarrer l'application
        window.onload = init;
    </script>
</body>
                </html>
